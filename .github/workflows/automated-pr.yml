# This workflow will build a Java project with Maven, and cache/restore any dependencies to improve the workflow execution time
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-java-with-maven

# This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.

name: automated-pr

on:
  pull_request:
    types:
      - closed

jobs:
  create-pull-request:
    runs-on: ubuntu-latest
    steps:
      - name: Check if pull request is merged to dev
        id: check_pr_merged
        run: echo "::set-output name=is_merged::$(echo ${{ github.event.pull_request.base.ref }} == 'dev' && echo true || echo false)"

      - name: Create pull request to main
        if: steps.check_pr_merged.outputs.is_merged == 'true'
        uses: peter-evans/create-pull-request@v3
        with:
          title: "Automatically generated PR from merged PR to dev"
          base: "main"
          head: "dev"
          token: ${{ secrets.GITHUB_TOKEN }}
